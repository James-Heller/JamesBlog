---
title: å…³äºMybatisçš„TypeHandlerä¸List<Any>
published: 2024-06-20
description: ''
image: './mybatis-superbird-small.png'
tags: ['ç¼–ç¨‹','Kotlin', 'MyBatis','MyBatisPlus']
category: 'Webå¼€å‘'
draft: false 
---

## å¯


è¿‘æ—¥åœ¨æˆ‘æ¯å¤©çš„é»‘å¥´ç”Ÿæ¶¯ä¸­ç¢°è§äº†ä¸€ä¸ªå¾ˆæ‰­æ›²çš„Bugï¼Œå…·ä½“è¡¨ç°ä¸º è°ƒç”¨æ¥å£æ—¶ä¼šéšæœºè§¦å‘ ***java.lang.NumberFormatExceptionï¼š For input string "XXå¸‚"ã€‚***
å…·ä½“éœ€æ±‚æ˜¯è¿™æ ·çš„ã€‚
  æœ‰ä¸€ä¸ªç”±çº¯æ•°å­—ç»„æˆçš„IDæ•°ç»„éœ€è¦å­˜åˆ°æ•°æ®åº“ä¸­ã€‚æˆ‘ä½¿ç”¨varcharè¿›è¡Œå‚¨å­˜ï¼Œæ¯ä¸ªIDä¹‹é—´ä½¿ç”¨ è‹±æ–‡å­—ç¬¦é€—å·è¿›è¡Œåˆ†éš”ã€‚åœ¨æœåŠ¡ä¸­å†™äº†ä¸€ä¸ª`String2IntListHandler` ç”¨æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚æ ¸å¿ƒå¤„ç†éƒ¨åˆ†å¦‚ä¸‹ã€‚

``` Kotlin
private fun transform(rawData: String): List<Int>{
    return rawData.split(",").map{ it.toInt() }
}
    
```
   ç›®å‰ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ã€‚ç›´åˆ°åé¢åˆå‡ºç°äº†ä¸€ä¸ªç±»ä¼¼çš„å†™æ³•ã€‚ å…·ä½“å¦‚ä¸‹ã€‚

   æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å­˜å…¥æ•°æ®åº“ä¹‹ä¸­ï¼ŒåŒæ ·ä½¿ç”¨varcharå‚¨å­˜ï¼Œç”¨è‹±æ–‡é€—å·åˆ†éš”ã€‚åŒæ ·çš„ï¼Œæˆ‘ä¹Ÿå†™äº†ä¸€ä¸ªç›¸ä¼¼çš„TypeHandler `StringToStringListHander`  å®ƒçš„å®ç°é€»è¾‘ä¹Ÿå·®ä¸å¤šã€‚

``````kotlin
private fun transform(rawData: String): List<String>{
    return rawData.split(",")
}
``````



æ¥ä¸‹æ¥æˆ‘åªéœ€è¦æŒ‰ç…§åœ¨æˆ‘æƒ³è¦åšå¤„ç†çš„å­—æ®µä¸Šé¢ä½¿ç”¨ `@TableField(typeHandler = String2IntList::class)`  æˆ–è€… `@TableField(typeHandler = String2StringList::class)`  å°±èƒ½è¾¾åˆ°æˆ‘æƒ³è¦çš„æ•ˆæœã€‚

å¥½ï¼Œ è‡³æ­¤ éœ€æ±‚å®Œæˆã€‚ æ­¤æ—¶æˆ‘è¿˜ä¸çŸ¥é“å·²ç»åŸ‹ä¸‹äº†ä¸€ä¸ªå¤§é›·ã€‚



##  æ‰¿



â€‹    èµ·åˆï¼Œä¸€åˆ‡éƒ½å¾ˆå®Œç¾ï¼Œäº‹å‘åœ¨æˆ‘åšå®Œåˆ«çš„éƒ¨åˆ†å¹¶é‡å¯æœåŠ¡ä¹‹åï¼Œå‰ç«¯è°ƒç”¨å‰è¿°çš„æ•°æ®æ¥å£æ—¶æ‹¿åˆ°äº†è¿”å›å€¼ `500`  çˆ†å‡ºäº†å¼€å¤´æ‰€å‡ºç°çš„é”™è¯¯ã€‚

â€‹    ç»è¿‡åˆ†æè°ƒç”¨æ ˆï¼Œæˆ‘å‘ç° ç»è¿‡å­—æ®µæ˜ å°„æ—¶æœ¬åº”ç»è¿‡`String2StringListHandler` çš„å­—æ®µç«Ÿç„¶å¥‡å¥‡æ€ªæ€ªçš„ç»è¿‡äº†`String2IntListHandler` ã€‚ é—®é¢˜åˆ†ææˆåŠŸï¼Œç€æ‰‹è§£å†³ã€‚ ~~ä¹ï¼Œè§£å†³ä¸äº†ï¼Œæ‘†çƒ‚ã€‚ğŸ˜…~~ 

   é‡å¯èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œé‡å¯ï¼Œmvn clean  mvn compileã€‚é—®é¢˜æ¶ˆå¤±ï¼Œé—®é¢˜è§£å†³ã€‚ 



***